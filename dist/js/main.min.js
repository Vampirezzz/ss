"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var $={convertStrToObj:function(e){return e?JSON.parse(e):{}}},goods=function(){function e(){_classCallCheck(this,e),this.cartlist=document.querySelector("#card-good"),this.go_index=document.querySelector(".go-index"),this.init(),this.addevent()}return _createClass(e,[{key:"init",value:function(){var e=window.localStorage,e=e.getItem("yougou")?e.getItem("yougou"):"",t=$.convertStrToObj(e);if(t[t.key]){this.cartlist.innerHTML=null,this.cartlist.innerHTML='\n            <div class="first">\n                <table>\n                    <tr class="tr1">\n                        <td><input type="checkbox">全选</td>\n                        <td>商品名称</td>\n                        <td>颜色尺码</td>\n                        <td>单价</td>\n                        <td>数量</td>\n                        <td>小计（元）</td>\n                        <td>操作</td>\n                    </tr>\n                </table>\n            </div>\n            <div class="wrap">\n                <span>\n                    <input type="checkbox">全选\n                </span>\n                <span>移入收藏夹</span>\n                <span><a href="javascript:;">删除</a></span>\n            </div>\n            ';var n,o=document.createElement("ul");for(n in t){for(var r=t[n],r=(console.log(r),o.setAttribute("data-good-id",n),o.innerHTML='\n                <li>\n                    <span><input type="checkbox"></span>\n                    <span><img src='.concat(r.src,"></span>\n                </li>\n                <li>").concat(r.name,"</li>\n                <li>\n                    <p>颜色:").concat(r.color,"</p>\n                    <p>尺码:").concat(r.size,"</p>\n                </li>\n                <li>").concat(r.price,'</li>\n                <li class="gd-num">\n                    <span><a href="javascript:;" class="minus">-</a></span>\n                    <input type="text" name="" id="" value="').concat(r.num,'">\n                    <a href="javascript:;" class="plus">+</a>\n                </li>\n                <li class="amount">').concat(r.price*r.num,'</li>\n                <li>\n                    <p>移入收藏夹</p>\n                    <p><a href="javascript:;" class="del">删除</a></p>\n                </li>\n                '),document.querySelector(".wrap")),i=(this.cartlist.insertBefore(o,r),document.querySelectorAll(".amount")),a=0,l=0,c=i.length;l<c;l++)a+=Number(i[l].innerText);r=document.createElement("div");r.className="pay",r.innerHTML='\n                <button class="shopping">继续购物</button>\n                <button class="cls">清空购物袋</button>\n                <span>总计（不含运费 ）：<b class="total-price">¥'.concat(a,'</b></span>\n                <input type="button" class="payment" value="去结算">\n            '),this.cartlist.appendChild(r)}var e=document.querySelector(".cls"),u=document.querySelectorAll("ul");e.onclick=function(){if(confirm("您确定要清空购物袋吗？"))for(var e=0;e<u.length;e++){var t=u[e].getAttribute("data-good-id"),n=window.localStorage,o=n.getItem("yougou")?n.getItem("yougou"):"",o=$.convertStrToObj(o);delete o[t],n.setItem("yougou",JSON.stringify(o)),u[e].remove()}location.reload()},document.querySelector(".shopping").onclick=function(){location.href="../index.html"}}for(var s=document.querySelectorAll(".minus"),d=0,p=s.length;d<p;d++)s[d].onclick=function(){for(var e=this.parentNode.parentNode.parentNode.getAttribute("data-good-id"),t=window.localStorage,n=t.getItem("yougou")?t.getItem("yougou"):"",n=$.convertStrToObj(n),o=(1<n[e].num&&n[e].num--,t.setItem("yougou",JSON.stringify(n)),this.parentNode.nextElementSibling.value=n[e].num,this.parentNode.parentNode.nextElementSibling.innerText=n[e].price*n[e].num,document.querySelectorAll(".amount")),r=0,i=0,a=o.length;i<a;i++)r+=Number(o[i].innerText);document.querySelector(".total-price").innerText=r};for(var m=document.querySelectorAll(".plus"),g=0,y=m.length;g<y;g++)m[g].onclick=function(){for(var e=this.parentNode.parentNode.getAttribute("data-good-id"),t=window.localStorage,n=t.getItem("yougou")?t.getItem("yougou"):"",n=$.convertStrToObj(n),o=(n[e].num++,t.setItem("yougou",JSON.stringify(n)),this.previousElementSibling.value=n[e].num,this.parentNode.nextElementSibling.innerText=n[e].price*n[e].num,document.querySelectorAll(".amount")),r=0,i=0,a=o.length;i<a;i++)r+=Number(o[i].innerText);document.querySelector(".total-price").innerText=r};for(var f=document.querySelectorAll(".gd-num>input"),h=0,v=f.length;h<v;h++)f[h].onblur=function(){for(var e=this.parentNode.parentNode.getAttribute("data-good-id"),t=window.localStorage,n=t.getItem("yougou")?t.getItem("yougou"):"",n=$.convertStrToObj(n),o=this.value,r=(/^\d+$/.test(o)&&0<o?n[e].num=o:n[e].num=1,t.setItem("yougou",JSON.stringify(n)),this.value=n[e].num,this.parentNode.nextElementSibling.innerText=n[e].price*n[e].num,document.querySelectorAll(".amount")),i=0,a=0,l=r.length;a<l;a++)i+=Number(r[a].innerText);document.querySelector(".total-price").innerText=i};for(var b=document.querySelectorAll(".del"),S=0,N=b.length;S<N;S++)b[S].onclick=function(){var e,t,n;confirm("确定要删除当前商品吗？")&&(e=this.parentNode.parentNode.parentNode.getAttribute("data-good-id"),n=(t=window.localStorage).getItem("yougou")?t.getItem("yougou"):"",delete(n=$.convertStrToObj(n))[e],t.setItem("yougou",JSON.stringify(n)),this.parentNode.parentNode.parentNode.remove()),location.reload()}}},{key:"addevent",value:function(){this.go_index.onclick=function(){location.href="../index.html"}}}]),e}();new goods;